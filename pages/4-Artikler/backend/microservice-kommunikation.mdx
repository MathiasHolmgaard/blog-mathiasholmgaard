# Microservice kommunikation

## Introduktion

I en microservices-arkitektur er kommunikation mellem tjenester afgørende for at sikre, at systemet fungerer korrekt og effektivt. Der er to primære kommunikationsmønstre, der anvendes: synkron og asynkron kommunikation. Hver af disse mønstre har sine egne fordele og ulemper og anvendes i forskellige scenarier afhængigt af kravene til systemet.

### Synkron Kommunikation

Synkron kommunikation indebærer, at en tjeneste sender en forespørgsel til en anden tjeneste og venter på et svar, før den fortsætter. Dette mønster bruges ofte, når der er behov for øjeblikkelig feedback eller resultat fra den kaldte tjeneste.

#### Eksempler på synkron kommunikation:

* **HTTP/REST:** En tjeneste sender en HTTP-forespørgsel til en anden tjeneste og venter på et svar.  
* **gRPC:** En højtydende RPC-ramme, der bruger HTTP/2 til transport og Protocol Buffers til serialisering.

#### Fordele:

* **Enkelhed:** Let at implementere og forstå.  
* **Øjeblikkelig feedback:** Tjenesten får straks svar og kan handle derefter.

#### Ulemper:

* **Afhængighed:** Tjenester er afhængige af hinandens tilgængelighed og ydeevne.  
* **Skalerbarhed:** Kan blive en flaskehals, hvis mange tjenester venter på svar samtidig.


### Asynkron Kommunikation

Asynkron kommunikation indebærer, at en tjeneste sender en besked til en anden tjeneste og fortsætter med sin behandling uden at vente på et svar. Dette mønster bruges ofte, når der ikke er behov for øjeblikkelig feedback, eller når tjenester skal kunne håndtere høj belastning uden at blive blokeret.

#### Eksempler på asynkron kommunikation:

* **Message Queues (f.eks. RabbitMQ, Kafka):** Tjenester sender beskeder til en kø, som andre tjenester kan læse fra og behandle.  
* **Event-Driven Architecture:** Tjenester udsender hændelser, som andre tjenester kan abonnere på og reagere på.

#### Fordele:

* **Løs kobling:** Tjenester er mindre afhængige af hinandens tilgængelighed og ydeevne.  
* **Skalerbarhed:** Tjenester kan håndtere høj belastning uden at blive blokeret.

#### Ulemper:

* **Kompleksitet:** Mere kompleks at implementere og fejlsøge.  
* **Forsinkelse:** Der kan være en forsinkelse, før beskeder behandles og svar modtages.

### Anvendelse i Microservices-Arkitektur

Valget mellem synkron og asynkron kommunikation afhænger af de specifikke krav og karakteristika ved systemet:

* **Synkron kommunikation** er velegnet til scenarier, hvor øjeblikkelig feedback er nødvendig, og hvor tjenester kan stole på hinandens tilgængelighed.  
* **Asynkron kommunikation** er velegnet til scenarier, hvor løs kobling og høj skalerbarhed er vigtigere end øjeblikkelig feedback.

Ved at forstå og anvende disse kommunikationsmønstre korrekt kan man designe en robust og skalerbar microservices-arkitektur, der opfylder systemets krav og forretningsmål.  
